---
- name: Add sbt repository
  apt_repository: repo="{{ jenkins_sbt_repo }}" state=present
  tags:
    - add-sbt-repo

- name: Add sbt key
  apt_key: keyserver={{ jenkins_sbt_keyserver }} id={{ jenkins_sbt_id }}
  tags:
    - add-sbt-keyserver

- name: Update packages
  apt: name={{ item }} state=present update_cache=yes allow_unauthenticated=yes
  with_items:
    - debian-archive-keyring
    - python-pip
    - default-jre
    - python-dev
    - python
    - lib32stdc++6
    - lib32z1
    - maven
    - git
    - sbt
    - libssl-dev
    - openssl
    - libffi-dev
    - unzip
    - openjdk-8-jre
  tags:
    - install-dependencies

- name: Install Ansible
  pip: name={{ item }} state=present
  with_items:
    - ansible
  tags:
    - install-ansible

- name: Install pytest
  pip: name={{ item }} state=present extra_args='-U'
  with_items:
    - pytest
  tags:
    - install-pytest

- name: Install mock
  pip: name={{ item }} state=present
  with_items:
    - mock
  tags:
    - install-mock

